document.addEventListener('DOMContentLoaded',()=>{const s=document.getElementById('searchBar');const games=Array.from(document.querySelectorAll('.game'));const genreLinks=Array.from(document.querySelectorAll('.sidebar a'));function applyFilters(){const q=s.value.toLowerCase();const active=document.querySelector('.sidebar a.active');const activeGenre=active?active.dataset.genre:'all';games.forEach(g=>{const titleMatch=g.dataset.title.toLowerCase().includes(q);const genreString=(g.dataset.genre||'').toLowerCase();const genreMatch=activeGenre==='all'||genreString.split(' ').includes(activeGenre)||genreString.includes(activeGenre);g.style.display=titleMatch&&genreMatch?'block':'none';});}s.addEventListener('input',applyFilters);genreLinks.forEach(link=>{link.addEventListener('click',e=>{e.preventDefault();genreLinks.forEach(l=>l.classList.remove('active'));link.classList.add('active');applyFilters();});});games.forEach(g=>{const iframe=g.querySelector('iframe');const src=g.dataset.src;if(iframe&&src)iframe.src=src;});if(genreLinks.length>0)genreLinks[0].classList.add('active');applyFilters();});
